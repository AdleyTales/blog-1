##微信小程序入门

### 微信小程序是什么
小程序是一个不需要下载安装就可使用的应用，它实现了应用触手可及的梦想，用户扫一扫或者搜一下即可打开应用。也体现了用完即走的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载。

优点

	1. 少了安装App的麻烦
	2. 释放手机内存
	3. 让手机桌面更简洁
	4. 对比H5流畅很多

局限性

	1. 小程序不能承载所有的用户需求
	2. 小程序的体系整体依赖于微信
	3. 小程序目前不能主动发送消息（包括群发和模板消息）

##### 对小程序的定位
**重运营，轻量级业务**

 - 拉新：流量红利，尤其是微信、支付宝
 - 保活：刺激用户的活跃度，比如搞一些签到活动之类的
 - 通知：还款提醒等
 - 活动：营销活动

 > 后续可结合微信订阅号，每天可以给用户推一次消息，生成小程序生态

##### 小程序入口

1. 小程序搜索入门&附近小程序
2. 扫一扫，长按识别小程序二维码
3. 好友分享，群分享
4. 关联公众号(菜单或文章卡片)
5. 小程序之间互相跳转(同一账号主体)

****

### 微信小程序能做什么

![能做什么](https://user-gold-cdn.xitu.io/2017/1/7/1ec0bec33072685d2ffc518b142b610d?imageslim)

****

### 微信小程序、微信公众号、H5之间互通

#### 小程序与公众号

小程序与公众号可以互相关联

> 可关联已有的小程序或快速创建小程序。已关联的小程序可被使用在自定义菜单和模版消息等场景中。

> 公众号可关联同主体的10个小程序及不同主体的3个小程序。同一个小程序可关联最多50个公众号。


#### 小程序与H5
小程序与H5可以相互跳转(有限制)

- 小程序跳H5

> web-view 组件是一个可以用来承载网页的容器，会自动铺满整个小程序页面，也就是说，微信小程序中可以直接运行web页了。 个人类型与海外类型的小程序暂不支持使用。

> 网页需要小程序管理后台配置域名白名单

> 详情查看[小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html)

 对于 web-view组件：

 1. M页dom，bom操作API未被屏蔽；
 2. 顶部栏显示M页title，且优先级高于小程序页面title；
 3. 小程序页面跳转轨迹和 web-view中web页跳转轨迹会被连贯记录，包括hashchange；
 4. M页间跳转层级不受限，不同于小程序页面最多5层的限制；
 5. 经测试内嵌M页调起转转APP正常；
 6. web-view组件 src属性支持动态赋值；

从以上结果来看，仅以小程序 web-view组件为容器，迁移已有web应用到小程序中的方案应该可行，包括基于hash路由的SPA。

还有一点值得注意，随着 web-view组件推出， Page.onShareAppMessage(options)函数参数中新增了 webViewUrl属性值，当用户调起转发面板时， options.webViewUrl返回 web-view组件中当前加载的 url，通过把 url添加到小程序页面分享路径中，可以变相实现转发M页到好友会话的功能。

- H5跳小程序

> 只要引入路径为https://res.wx.qq.com/open/js/jweixin-1.3.0.js的js文件，然后在执行以下代码就可以了。
``wx.miniProgram.navigateTo({url: '/path/to/page'})``

> 注：目前只支持小程序内嵌H5,并且只有内嵌的H5才能跳回小程序。

****

### 小程序支持打开移动应用（APP）
为方便用户获取应用中的服务，从移动应用分享至微信的小程序页面，用户访问时支持打开来源应用。

当小程序从 APP 分享消息卡片的场景打开时，小程序会获得打开 APP 的能力，此时用户点击按钮可以打开分享该卡片的 APP。即小程序不能打开任意 APP，只能跳回分享该小程序卡片的 APP。

简单来说就是，当用户将APP的内容分享到微信好友或微信群时，就会自动变成小程序的形式，而当用户点击这张分享的卡片式就可以回到原来的APP内。小程序和APP之间完成相互跳转，形成了一个用户流量闭环。

注：

> 1. 必须先使用“APP链接分享到微信打开为小程序”能力，

> 2. 用户仅可从APP分享至微信的“小程序卡片”，访问时打开来源应用，其他路径暂不支持 。

![小程序打开app](https://upload-images.jianshu.io/upload_images/1224641-4f9664b5fe9e1cc9.png?imageMogr2/auto-orient/)

****

### 小程序常见框架

#### 原生开发

**优点**

> 上手简单
> 未经过转义，性能最好

**缺点**

> 需要全新学习小程序的语法格式。 非工程化,不支持 npm 包,不支持 css预处理器。不具有可移植性。

#### 去哪儿网[Nanachi](https://rubylouvre.github.io/nanachi/)

**优点**
> 采用React语法标准，支持 JSX 书写。
>
> 工程化，支持npm包，支持css预处理器。
>
> 支持微信、支付宝、百度小程序、快应用和H5。

**缺点**
> 不是一个团队在维护，业界实战比较较少，可能会趟坑比较多。
>
> 使用的也是类react框架anu。
>
> 未形成一个完整的生态。

#### 京东[Taro](https://taro.js.org/)

**优点**
> 采用React语法标准，支持 JSX 书写。
>
> 工程化：支持npm包，支持css预处理器。
>
> 支持多端：微信、支付宝、百度小程序，快应用，RN和H5。
>
> 业界有较多的线上案例。
>
> 有一个[成熟的团队](https://nervjs.github.io/taro/docs/team.html)在维护。
>
> 周边生态成熟，支持redux数据流。
>
> 开发体验优
>
> 可以使用微信小程序第三方组件。
>
> UI组件较丰富。

**缺点**
> 使用的是类react框架，运行时依赖于nerv。

#### 美团[mpvue](http://mpvue.com/)

**优点**
> 采用VUE语法标准
>
> 工程化
>
> 框架基于 Vue.js 核心，mpvue 修改了 Vue.js 的 runtime 和 compiler 实现，使其可以运行在小程序环境中，从而为小程序开发引入了整套 Vue.js 开发体验。

**缺点**
> 不支持多端
>
> 基于vue 2.4.1，升级可能回滞后于vue, 开发体验上不能使用最新的vue特性。
>
> 更新迭代慢，上一个版本是5个月前，若有框架问题不能及时处理。

#### 腾讯[wepy](https://tencent.github.io/wepy/)
类似于 mpvue

接近于 Vue.js，支持组件 Props 传值，自定义事件、组件分布式复用Mixin、计算属性函数computed、模板内容分发slot等等

****


### 未来思考

小程序业务需求持续增长，开发者们面临的技术问题越来越复杂，对于微信小程序开发效率也越来越重视：

- 如何通过技术手段提升开发效率，以应对不断增长的业务需求？
- 微信小程序的工程化探索有哪些最新进展？
- 如何实现小程序的自动化构建、自动化测试？
- 如何将小程序开发与团队现有的技术栈有机结合？
- 如何适配 H5、React Native、微信小程序等多端需求？



### 参考资料文档
[从零开始：微信小程序新手入门宝典](https://juejin.im/entry/58708a4661ff4b006d38911b)

[浅谈微信小程序前端生态](https://mp.weixin.qq.com/s?__biz=MzU0OTExNzYwNg==&mid=2247484031&idx=1&sn=379a0fc6ecea87e7be07d732598dc769&chksm=fbb589b6ccc200a071240c166a6f940994ddfdf70335242c32291b6543125fa667b0cc241969&scene=21#wechat_redirect)

[微信小程序内嵌网页的一些（最佳）实践](https://blog.csdn.net/p6p7qsw6ua47a2sb/article/details/79422454)

[App分享微信小程序功能介绍和业务方案分析](https://www.jianshu.com/p/db3d3ddc21d2)

[小程序技术方案选型](https://zhuanlan.zhihu.com/p/50662589)
